!function(){var t=function(t){return 0<t.offsetWidth},n=function(t,n){if(t&&!n){var e,o=location.hash;o&&-1!==(e=o.indexOf("&"))&&(t+=o.substr(e)),history.replaceState(null,null,location.origin+location.pathname+location.search+"#"+t)}},e=function(t){var n,e=t.getBearing(),o=t.getPitch(),i=0!==e||0!==o;return i&&(t._busyStraightBounds=!0,t.setBearing(0).setPitch(0)),n=t.getBounds(),i&&(t.setBearing(e).setPitch(o),t._busyStraightBounds=!1),n},o=function(t,n){var o,i,r,a="string"==typeof t;if(a){var s=n,l=function(n,e){var o=0;return void 0!==t[n]&&e===t[n].charAt(t[n].length-1).toLowerCase()&&(o=t[n].slice(0,-1))&&!isNaN(o)?o:0},g=function(t,n){return!(t<-86||t>86)&&(n<-180?n=n%360+360:n>180&&(n=n%360-360),n)};if(-1!==(o=t.indexOf("&"))&&(t=t.substr(0,o)),!((t=t.split(","))&&2<t.length)||isNaN(t[0])||isNaN(t[1])&&!(o=t[1].indexOf("x")))return!1;if(n=!!o){if(o=t[1].split("x"),isNaN(o[0])||isNaN(o[1])||isNaN(t[2]))return!1;var u=t[0],c=g(u,o[0]),h=o[1],d=g(h,t[2]);if(!c||!d)return!1;s?o={bounds:L.latLngBounds([[u,c],[h,d]]),latNW:u,lngNW:c,latSE:h,lngSE:d}:(r=[[c,u],[d,h]],o={bounds:new mapboxgl.LngLatBounds(r)})}else{var f=t[0],p=g(f,t[1]);if(!p)return!1;o={center:s?[f,p]:[p,f],zoom:l(2,"z"),lat:f,lng:p}}s||(o.pitch=l((o.bearing=l(3,"b"))?4:3,"p"))}else{s=void 0===t.getPitch;var N=t.getCenter();if(o={zoom:t.getZoom(),center:N,lat:N.lat,lng:N.lng},n&&(i=o.bounds=t.getBounds(),s)){var b=i.getNorthWest(),v=i.getSouthEast();o.latNW=b.lat,o.lngNW=b.lng,o.latSE=v.lat,o.lngSE=v.lng}s||(o.bearing=t.getBearing(),o.pitch=t.getPitch())}return!s&&n&&(a||(r=i.toArray()),o.latNE=r[0][1],o.lngNE=r[0][0],o.latSW=r[1][1],o.lngSW=r[1][0],(a||0>n)&&(a||0===o.bearing&&0===o.pitch||(r=(i=e(t)).toArray()),o.straightBounds=i,o.slatNE=r[0][1],o.slngNE=r[0][0],o.slatSW=r[1][1],o.slngSW=r[1][0])),o.toString=function(t){var n=this,e=n.latNE||n.latNW;if(n.lat||e)return(!e||t&&n.lat?n.lat+","+n.lng+","+n.zoom+"z":void 0===n.slatNE?n.latNW+","+n.lngNW+"x"+n.latSE+","+n.lngSE:n.slatNE+","+n.slngNE+"x"+n.slatSW+","+n.slngSW)+(n.bearing?","+n.bearing+"b":"")+(n.pitch?","+n.pitch+"p":"")},o},i=function(e,i,r,a){if(!e._busyStraightBounds&&t(e.getContainer())){void 0===i&&(i=!0);var s=o(e,!i&&-1),l=s.toString(i);return n(l,a),(void 0===r||r)&&localStorage.setItem("string"==typeof r?r:"map-pos",l),s}},r=function(t,e,i,r,a){var s,l=!r&&location.hash;return l&&"#"===l.charAt(0)?(s=o(l.substr(1),a))&&(s.restored="hash"):s||void 0!==i&&!i||!(i=localStorage.getItem("string"==typeof i?i:"map-pos"))||((s=o(i,a))&&(s.restored="storage"),void 0===e&&(e=!0),s&&n(s.toString(e),r)),s||t},a=function(t){var n=void 0===t.lat?t[0]:t.lat,e=void 0===t.lng?t[1]:t.lng;return Math.abs(n.toFixed(3))+"°"+(n>0?"N":"S")+" / "+Math.abs(e.toFixed(3))+"°"+(e>0?"E":"W")};if("object"==typeof L)L.Map.include({isViewportRestored:!1,isVisible:function(){return t(this.getContainer())},getViewportInfo:function(t,n){return o(this,t)},restoreViewport:function(t,n,e){e||(e={});var o=this,a=void 0===e.isCenterZoom||e.isCenterZoom,s=r(!1,a,e.storageName,e.noHashline,1);return s&&(o.isViewportRestored=s.restored,s.zoom&&(t=s.center,n=s.zoom)),!e||e.noHashline&&!e.storageName||o.on("moveend zoomend",function(){i(o,a,e.storageName,e.noHashline)}),s&&s.bounds?o.fitBounds(s.bounds):o.setView(t,n,e)},latLngToStr:function(t){return a(t)}});else{var s=mapboxgl;s.getViewportInfo=o,s.trackViewport=i,s.restoreViewport=function(t,n,e,o){return r(t,n,e,o,0)},s.applyViewport=function(t,n){n.bounds&&(t.fitBounds(n.bounds,{animate:!1}),n.pitch&&t.setPitch(n.pitch),n.bearing&&t.setBearing(n.bearing))},s.getStraightBounds=e,s.latLngToStr=a}}();